---
# https://zuul-ci.org/docs/nodepool/configuration.html#attr-diskimages
diskimages:
  - name: img-debian-12
    release: bookworm
    # https://zuul-ci.org/docs/nodepool/configuration.html#attr-diskimages.elements
    elements:
      - debian
      # Those live in /usr/share/sf-elements
      - nodepool-minimal
      - zuul-worker-user
      # Our own elements in this repository's /nodepool/elements folder
      - wazo
    python-path: /usr/bin/python3

labels:
  - name: vm-debian-12-m1s
    min-ready: 2
  - name: vm-debian-12-m1m
    min-ready: 1

providers:
  - name: ec2-eu-west-1
    driver: aws
    region-name: eu-west-1
    object-storage:
       bucket-name: wazo-software-factory-disk-images
    diskimages:
      - name: img-debian-12
        username: zuul-worker
        connection-port: 22
        volume-size: 40
    pools:
      - name: m1m-bookworm
        max-servers: 5
        subnet-id: subnet-0cda0d5056f892394 # eu-west-1 IT subnet
        security-group-id: sg-0fc30744a6f419196 # Specific security group for Zuul workers
        labels:
          - name: vm-debian-12-m1m
            diskimage: img-debian-12
            instance-type: t3.medium
            key-name: nodepool
      - name: m1s-bookworm
        max-servers: 5
        subnet-id: subnet-0cda0d5056f892394 # eu-west-1 IT subnet
        security-group-id: sg-0fc30744a6f419196 # Specific security group for Zuul workers
        labels:
          - name: vm-debian-12-m1s
            diskimage: img-debian-12
            instance-type: t3.small
            key-name: nodepool
